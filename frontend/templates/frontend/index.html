<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deck.gl Map</title>
    <!-- Include Mapbox and deck.gl CDN -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
</head>
<body>
    <div id="map-container" style="width: 100%; height: 500px;"></div>

    <script>
        // Mapbox access token
        const MAPBOX_ACCESS_TOKEN = "{{mapbox_token}}";

        // Initialize the deck.gl map
        const deckgl = new deck.DeckGL({
            container: 'map-container',
            mapboxApiAccessToken: MAPBOX_ACCESS_TOKEN,
            mapStyle: 'mapbox://styles/mapbox/light-v9',
            initialViewState: {
                longitude: -0.88,
                latitude: 41.64,
                zoom: 12,
                pitch: 45,
                bearing: 0
            },
            controller: true,
            layers: [
                new deck.ScatterplotLayer({
                    data: [
                        {position: [-122.4, 37.8], size: 100}
                    ],
                    getPosition: d => d.position,
                    getRadius: d => d.size,
                    getFillColor: [255, 0, 0],
                })
            ]
        });
    </script>
</body>
</html>